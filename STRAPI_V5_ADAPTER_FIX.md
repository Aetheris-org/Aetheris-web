# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –¥–ª—è Strapi v5

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏:
- ‚úÖ –í Strapi –∞–¥–º–∏–Ω–∫–µ –≤—Å–µ –ø–æ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (title, content, tags, author)
- ‚ùå –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–µ–π –ø—É—Å—Ç—ã–µ (–Ω–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è, —Ç–µ–≥–æ–≤)

## üîé –ü—Ä–∏—á–∏–Ω–∞

**Strapi v5 –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API**:

### Strapi v4 (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç):
```json
{
  "data": [{
    "id": 22,
    "attributes": {
      "title": "sdfghjkl",
      "content": "<p>erdtfyguhijokp</p>",
      "tags": ["react"]
    }
  }]
}
```

### Strapi v5 (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç):
```json
{
  "data": [{
    "id": 22,
    "title": "sdfghjkl",
    "content": "<p>erdtfyguhijokp</p>",
    "tags": ["react"]
  }]
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–¥–∞–ø—Ç–µ—Ä `unwrapStrapiEntity` –ø—ã—Ç–∞–ª—Å—è –∏–∑–≤–ª–µ—á—å `response.attributes`, –∫–æ—Ç–æ—Ä—ã—Ö –≤ v5 **–ù–ï–¢**:

```typescript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (—Ç–æ–ª—å–∫–æ –¥–ª—è v4):
export function unwrapStrapiEntity<T>(response: StrapiEntity<T>): T & { id: number } {
  return {
    id: response.id,
    ...response.attributes  // ‚ùå –í v5 —ç—Ç–æ–≥–æ –ø–æ–ª—è –ù–ï–¢!
  };
}
```

–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è —Ç–æ–ª—å–∫–æ `{ id: 22 }`, –∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è —Ç–µ—Ä—è–ª–∏—Å—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–∏–ª –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ **–æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** (v4 –∏ v5):

**–§–∞–π–ª**: `frontend/src/adapters/strapi.ts`

```typescript
/**
 * Unwrap a single Strapi entity response
 * Supports both Strapi v4 (with attributes) and v5 (flat) formats
 */
export function unwrapStrapiEntity<T>(response: any): T & { id: number } {
  // Strapi v5: flat format { id: 1, title: "...", content: "..." }
  if (!response.attributes) {
    return response;
  }
  
  // Strapi v4: nested format { id: 1, attributes: { title: "...", content: "..." } }
  return {
    id: response.id,
    ...response.attributes
  };
}
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ `attributes`**:
   - –ï—Å–ª–∏ **–ù–ï–¢** ‚Üí Strapi v5 (–ø–ª–æ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç) ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç –∫–∞–∫ –µ—Å—Ç—å
   - –ï—Å–ª–∏ **–ï–°–¢–¨** ‚Üí Strapi v4 (–≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç) ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ `attributes`

2. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
   - ‚úÖ `unwrapStrapiCollection`
   - ‚úÖ `unwrapStrapiResponse`
   - ‚úÖ `unwrapStrapiCollectionResponse`

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

–ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- –ù–∞–∂–º–∏ **F5** –∏–ª–∏ **Ctrl+R** (Windows/Linux)
- –ù–∞–∂–º–∏ **Cmd+R** (macOS)

Vite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –∫–æ–¥ —Å –Ω–æ–≤—ã–º –∞–¥–∞–ø—Ç–µ—Ä–æ–º.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. –û—Ç–∫—Ä–æ–π –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `http://localhost:5173/`
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ‚úÖ –í—Å–µ —Å—Ç–∞—Ç—å–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
   - ‚úÖ –í–∏–¥–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç (–ø—Ä–µ–≤—å—é)
   - ‚úÖ –í–∏–¥–Ω—ã —Ç–µ–≥–∏
   - ‚úÖ –í–∏–¥–µ–Ω –∞–≤—Ç–æ—Ä
   - ‚úÖ –í–∏–¥–Ω–∞ –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é

1. –û—Ç–∫—Ä–æ–π `http://localhost:5173/create-article`
2. –ó–∞–ø–æ–ª–Ω–∏:
   - **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: "–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
   - **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: "–í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!"
   - **–¢–µ–≥–∏**: –≤—ã–±–µ—Ä–∏ 1-2 —Ç–µ–≥–∞
3. –ù–∞–∂–º–∏ **"–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –°—Ç–∞—Ç—å—è –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- ‚úÖ –ï—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞"
- ‚úÖ –ï—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ "–í—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!"
- ‚úÖ –í–∏–¥–Ω—ã —Ç–µ–≥–∏
- ‚úÖ –í–∏–¥–µ–Ω –∞–≤—Ç–æ—Ä

## üìä –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|----------|--------|---------|
| –ü—É—Å—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–µ–π | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –û–±–Ω–æ–≤–ª—ë–Ω –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è v5 |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `title` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ê–¥–∞–ø—Ç–µ—Ä —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—â–µ—Ç `attributes` |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `content` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ê–¥–∞–ø—Ç–µ—Ä —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—â–µ—Ç `attributes` |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç `tags` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ê–¥–∞–ø—Ç–µ—Ä —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—â–µ—Ç `attributes` |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `author` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ê–¥–∞–ø—Ç–µ—Ä —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—â–µ—Ç `attributes` |

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ê–¥–∞–ø—Ç–µ—Ä **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º** —Å–æ Strapi v4:
- ‚úÖ –ï—Å–ª–∏ –ø—Ä–∏–¥—É—Ç –¥–∞–Ω–Ω—ã–µ —Å `attributes` (v4) ‚Üí –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ï—Å–ª–∏ –ø—Ä–∏–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –±–µ–∑ `attributes` (v5) ‚Üí –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è **–ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- ‚úÖ –í—Å–µ security –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –≤ HttpOnly cookies
- ‚úÖ Rate limiting –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å—Ç–∞—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—á–µ–º—É Strapi v5 –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç?

Strapi v5 —É–ø—Ä–æ—Å—Ç–∏–ª —Ñ–æ—Ä–º–∞—Ç API –¥–ª—è:
1. **–ú–µ–Ω—å—à–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏** ‚Üí –ø—Ä–æ—â–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏
2. **–ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞** ‚Üí –±—ã—Å—Ç—Ä–µ–µ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å–µ—Ç–∏
3. **–ü—Ä–æ—â–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** ‚Üí –Ω–µ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å `attributes`

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å v4 –Ω–∞ v5

–ï—Å–ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ–¥ –ø–æ–¥ v5 (—É–±—Ä–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É v4), –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∞–¥–∞–ø—Ç–µ—Ä:

```typescript
// –¢–æ–ª—å–∫–æ –¥–ª—è Strapi v5 (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
export function unwrapStrapiEntity<T>(response: any): T & { id: number } {
  return response; // –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
}
```

–ù–æ **—Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ –ª—É—á—à–µ**, —Ç–∞–∫ –∫–∞–∫:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–µ–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—å–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏!


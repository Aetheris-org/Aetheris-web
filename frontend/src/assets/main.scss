
// Импорт шрифтов
@import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap');

// Определение шрифтов
$font-comfortaa: 'Comfortaa', cursive;
$font-sans-serif: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

// Начальное значение высоты хедера и глобальные шрифты
:root {
  --header-height: 80px;
  
  // Глобальные шрифты (одинаковы для всех тем)
  --font-comfortaa: #{$font-comfortaa};
  --font-sans-serif: #{$font-sans-serif};
  --font-primary: var(--font-comfortaa);
  --font-secondary: var(--font-sans-serif);
  --font-heading: var(--font-comfortaa);
  --font-body: var(--font-comfortaa);
  --font-sans: var(--font-sans-serif);
  // Шрифт для статей (настраивается пользователем)
  --article-font-family: 'Comfortaa', cursive;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  scroll-behavior: smooth;
  background-color: var(--bg-primary);
}

//OLED theme (default theme for our website - pure black for OLED displays)
:root[data-theme='oled'] {
  // Base colors - Pure black for OLED energy saving
  --bg-primary: #000000;
  --bg-secondary: #0A0A0A;
  --btn-primary: #1A1A1A;
  --text-primary: #FFFFFF;
  --text-secondary: #B0B0B0;
  --text-third: #D0D0D0;
  --text-red: #FF4444;
  --text-hover: #E0E0E0;
  --primary-violet: #A020F0;
  --primary-pink: #FF00FF;
  --primary-blue: #6070FF;
  --ico-color: #CCCCCC;
  
  // Difficulty levels - brighter for OLED high contrast
  --difficulty-easy-bg: rgba(34, 197, 94, 0.3);
  --difficulty-easy-text: #10b981;
  --difficulty-easy-icon: brightness(0) saturate(100%) invert(35%) sepia(100%) saturate(2000%) hue-rotate(90deg) brightness(150%) contrast(150%);
  
  --difficulty-medium-bg: rgba(245, 158, 11, 0.3);
  --difficulty-medium-text: #fbbf24;
  --difficulty-medium-icon: brightness(0) saturate(100%) invert(84%) sepia(100%) saturate(1000%) hue-rotate(15deg) brightness(140%) contrast(140%);
  
  --difficulty-hard-bg: rgba(239, 68, 68, 0.3);
  --difficulty-hard-text: #f87171;
  --difficulty-hard-icon: brightness(0) saturate(100%) invert(15%) sepia(100%) saturate(2000%) hue-rotate(0deg) brightness(150%) contrast(150%);
  
  // Tags
  --tag-success-bg: rgba(34, 197, 94, 0.3);
  --tag-info-bg: rgba(59, 130, 246, 0.3);
  --tag-warning-bg: rgba(245, 158, 11, 0.3);
  --tag-danger-bg: rgba(239, 68, 68, 0.3);
  --tag-secondary-bg: rgba(100, 116, 139, 0.3);
  --tag-text: #FFFFFF;
  
  // Badges
  --badge-draft-bg: rgba(245, 158, 11, 0.2);
  --badge-draft-text: #f59e0b;
  --badge-draft-border: rgba(245, 158, 11, 0.6);
  
  --badge-edited-bg: rgba(59, 130, 246, 0.15);
  --badge-edited-text: #3b82f6;
  --badge-edited-border: rgba(59, 130, 246, 0.6);
  
  --badge-self-bg: rgba(140, 0, 255, 0.1);
  --badge-self-text: var(--primary-violet);
  
  // UI elements - higher contrast for OLED
  --ui-gray: #9CA3AF;
  --ui-accent: #a78bfa;
  --ui-border-light: #e5e7eb;
  --ui-hover-bg: rgba(40, 40, 40, 1);
  
  // Difficulty circle colors (для CreateArticle)
  --difficulty-easy-color: #22c55e;
  --difficulty-easy-hover-border: rgba(34, 197, 94, 0.7);
  --difficulty-easy-hover-bg: rgba(34, 197, 94, 0.1);
  --difficulty-easy-selected-border: #22c55e;
  --difficulty-easy-selected-bg: rgba(34, 197, 94, 0.2);
  --difficulty-easy-selected-fill: #16a34a;
  
  --difficulty-medium-color: #f59e0b;
  --difficulty-medium-hover-border: rgba(245, 158, 11, 1);
  --difficulty-medium-hover-bg: rgba(245, 158, 11, 0.1);
  --difficulty-medium-selected-border: #f59e0b;
  --difficulty-medium-selected-bg: rgba(245, 158, 11, 0.2);
  --difficulty-medium-selected-fill: #d97706;
  
  --difficulty-hard-color: #ef4444;
  --difficulty-hard-hover-border: rgba(239, 68, 68, 1);
  --difficulty-hard-hover-bg: rgba(239, 68, 68, 0.1);
  --difficulty-hard-selected-border: #ef4444;
  --difficulty-hard-selected-bg: rgba(239, 68, 68, 0.2);
  --difficulty-hard-selected-fill: #dc2626;
}

// White theme
:root[data-theme='white'] {
  // Base colors
  --bg-primary: #E5E7EB;
  --bg-secondary: #FFFFFF;
  --btn-primary: #FAFAFA;
  --text-primary: #111827;
  --text-secondary: #1A202C;
  --text-third: #6B7280;
  --text-red: #FF3B3B;
  --text-hover: #4B5563;
  --primary-violet: #7C3AED;
  --primary-pink: #DB2777;
  --primary-blue: #4338CA;
  --ico-color: #1c1d1f;
  
  // Difficulty levels
  --difficulty-easy-bg: rgba(34, 197, 94, 0.15);
  --difficulty-easy-text: #047857;
  --difficulty-easy-icon: brightness(0) saturate(100%) invert(35%) sepia(100%) saturate(2000%) hue-rotate(90deg) brightness(110%) contrast(110%);
  
  --difficulty-medium-bg: rgba(245, 158, 11, 0.15);
  --difficulty-medium-text: #d97706;
  --difficulty-medium-icon: brightness(0) saturate(100%) invert(84%) sepia(100%) saturate(1000%) hue-rotate(15deg) brightness(100%) contrast(100%);
  
  --difficulty-hard-bg: rgba(239, 68, 68, 0.15);
  --difficulty-hard-text: #b91c1c;
  --difficulty-hard-icon: brightness(0) saturate(100%) invert(15%) sepia(100%) saturate(2000%) hue-rotate(0deg) brightness(110%) contrast(110%);
  
  // Tags
  --tag-success-bg: rgba(34, 197, 94, 0.25);
  --tag-info-bg: rgba(59, 130, 246, 0.25);
  --tag-warning-bg: rgba(245, 158, 11, 0.25);
  --tag-danger-bg: rgba(239, 68, 68, 0.25);
  --tag-secondary-bg: rgba(100, 116, 139, 0.25);
  --tag-text: #FFFFFF;
  
  // Badges
  --badge-draft-bg: rgba(245, 158, 11, 0.15);
  --badge-draft-text: #d97706;
  --badge-draft-border: rgba(245, 158, 11, 0.5);
  
  --badge-edited-bg: rgba(59, 130, 246, 0.12);
  --badge-edited-text: #2563eb;
  --badge-edited-border: rgba(59, 130, 246, 0.5);
  
  --badge-self-bg: rgba(124, 58, 237, 0.1);
  --badge-self-text: var(--primary-violet);
  
  // UI elements
  --ui-gray: #6B7280;
  --ui-accent: #7C3AED;
  --ui-border-light: #d1d5db;
  --ui-hover-bg: rgba(243, 244, 246, 1);
  
  // Difficulty circle colors (для CreateArticle)
  --difficulty-easy-color: #16a34a;
  --difficulty-easy-hover-border: rgba(34, 197, 94, 0.7);
  --difficulty-easy-hover-bg: rgba(34, 197, 94, 0.1);
  --difficulty-easy-selected-border: #16a34a;
  --difficulty-easy-selected-bg: rgba(34, 197, 94, 0.2);
  --difficulty-easy-selected-fill: #15803d;
  
  --difficulty-medium-color: #d97706;
  --difficulty-medium-hover-border: rgba(245, 158, 11, 1);
  --difficulty-medium-hover-bg: rgba(245, 158, 11, 0.1);
  --difficulty-medium-selected-border: #d97706;
  --difficulty-medium-selected-bg: rgba(245, 158, 11, 0.2);
  --difficulty-medium-selected-fill: #b45309;
  
  --difficulty-hard-color: #dc2626;
  --difficulty-hard-hover-border: rgba(239, 68, 68, 1);
  --difficulty-hard-hover-bg: rgba(239, 68, 68, 0.1);
  --difficulty-hard-selected-border: #dc2626;
  --difficulty-hard-selected-bg: rgba(239, 68, 68, 0.2);
  --difficulty-hard-selected-fill: #b91c1c;
}

// Night Dark theme
:root[data-theme='night-dark'] {
  // Base colors
  --bg-primary: #000000;
  --bg-secondary: #101013;
  --btn-primary: #222329;
  --text-primary: #ECF9FB;
  --text-secondary: #B0BAC5;
  --text-third: #AFB7C7;
  --text-red: #FF3B3B;
  --text-hover: #8a9495;
  --primary-violet: #8C00FF;
  --primary-pink: #EE00FF;
  --primary-blue: #505BE5;
  --ico-color: #9BA4AE;
  
  // Difficulty levels
  --difficulty-easy-bg: rgba(34, 197, 94, 0.2);
  --difficulty-easy-text: #10b981;
  --difficulty-easy-icon: brightness(0) saturate(100%) invert(35%) sepia(100%) saturate(2000%) hue-rotate(90deg) brightness(140%) contrast(140%);
  
  --difficulty-medium-bg: rgba(245, 158, 11, 0.2);
  --difficulty-medium-text: #fbbf24;
  --difficulty-medium-icon: brightness(0) saturate(100%) invert(84%) sepia(100%) saturate(1000%) hue-rotate(15deg) brightness(130%) contrast(130%);
  
  --difficulty-hard-bg: rgba(239, 68, 68, 0.2);
  --difficulty-hard-text: #ef4444;
  --difficulty-hard-icon: brightness(0) saturate(100%) invert(15%) sepia(100%) saturate(2000%) hue-rotate(0deg) brightness(140%) contrast(140%);
  
  // Tags
  --tag-success-bg: rgba(34, 197, 94, 0.3);
  --tag-info-bg: rgba(59, 130, 246, 0.3);
  --tag-warning-bg: rgba(245, 158, 11, 0.3);
  --tag-danger-bg: rgba(239, 68, 68, 0.3);
  --tag-secondary-bg: rgba(100, 116, 139, 0.3);
  --tag-text: #FFFFFF;
  
  // Badges
  --badge-draft-bg: rgba(245, 158, 11, 0.2);
  --badge-draft-text: #fbbf24;
  --badge-draft-border: rgba(245, 158, 11, 0.6);
  
  --badge-edited-bg: rgba(59, 130, 246, 0.15);
  --badge-edited-text: #60a5fa;
  --badge-edited-border: rgba(59, 130, 246, 0.6);
  
  --badge-self-bg: rgba(140, 0, 255, 0.15);
  --badge-self-text: var(--primary-violet);
  
  // UI elements
  --ui-gray: #9CA3AF;
  --ui-accent: #a78bfa;
  --ui-border-light: #4B5563;
  --ui-hover-bg: rgba(75, 85, 99, 0.5);
  
  // Difficulty circle colors (для CreateArticle)
  --difficulty-easy-color: #22c55e;
  --difficulty-easy-hover-border: rgba(34, 197, 94, 0.7);
  --difficulty-easy-hover-bg: rgba(34, 197, 94, 0.1);
  --difficulty-easy-selected-border: #22c55e;
  --difficulty-easy-selected-bg: rgba(34, 197, 94, 0.2);
  --difficulty-easy-selected-fill: #16a34a;
  
  --difficulty-medium-color: #fbbf24;
  --difficulty-medium-hover-border: rgba(245, 158, 11, 1);
  --difficulty-medium-hover-bg: rgba(245, 158, 11, 0.1);
  --difficulty-medium-selected-border: #fbbf24;
  --difficulty-medium-selected-bg: rgba(245, 158, 11, 0.2);
  --difficulty-medium-selected-fill: #f59e0b;
  
  --difficulty-hard-color: #ef4444;
  --difficulty-hard-hover-border: rgba(239, 68, 68, 1);
  --difficulty-hard-hover-bg: rgba(239, 68, 68, 0.1);
  --difficulty-hard-selected-border: #ef4444;
  --difficulty-hard-selected-bg: rgba(239, 68, 68, 0.2);
  --difficulty-hard-selected-fill: #dc2626;
}

.bg-bg-primary { background-color: var(--bg-primary); }
.bg-bg-secondary { background-color: var(--bg-secondary); }
.bg-btn-primary { background-color: var(--btn-primary); }
.bg-primary-violet { background-color: var(--primary-violet); }
.bg-primary-blue { background-color: var(--primary-blue); }
.bg-linear-violet { background: linear-gradient(180deg, #16181C 0%, #21003d 100%); }
.bg-linear-violet-pink { background: linear-gradient(to right, #B200FF 0%, #EE00FF 100%); }
.text-text-primary { color: var(--text-primary); }
.text-text-secondary { color: var(--text-secondary); }
.text-third { color: var(--text-third); }
.text-theme-card { color: var(--theme-card-text); }
.text-red { color: var(--text-red); }
.text-hover { color: var(--text-hover); }
.text-primary-violet { color: var(--primary-violet); }
.text-primary-pink { color: var(--primary-pink); }
.text-primary-blue { color: var(--primary-blue); }
.footer-bg { background-color: #121212; }

// Responsive Design Mixins for 2K and 4K (новая система)
@mixin responsive-content {
  /* Базовое разрешение ≤1920px */
  @media (max-width: 1920px) {
    @content;
  }
}

@mixin responsive-content-2k {
  /* 2K разрешение (2561-3839px) - масштаб 1.3 */
  @media (min-width: 2561px) and (max-width: 3839px) {
    @content;
  }
}

@mixin responsive-content-4k {
  /* 4K разрешение (≥3840px) - масштаб 1.6 */
  @media (min-width: 3840px) {
    @content;
  }
}

// Миксин для автоматического масштабирования свойств
@mixin scale-property($property, $base-value) {
  #{$property}: $base-value;
  
  @include responsive-content-2k {
    @if type-of($base-value) == number {
      #{$property}: $base-value * 1.3;
    }
  }
  
  @include responsive-content-4k {
    @if type-of($base-value) == number {
      #{$property}: $base-value * 1.6;
    }
  }
}

// Backward compatibility - сохраняем старые названия миксинов для плавного перехода
@mixin responsive-2k {
  @include responsive-content-2k {
    @content;
  }
}

@mixin responsive-4k {
  @include responsive-content-4k {
    @content;
  }
}

.body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-sans);
}

/* PrimeVue Toast customization to match site style */
.p-toast {
  .p-toast-message {
    background: var(--bg-secondary);
    border: 1px solid rgba(255,255,255,0.08);
    color: var(--text-primary);
    border-radius: 16px;
    backdrop-filter: blur(6px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    font-family: var(--font-sans);
  }
  .p-toast-message-content {
    padding: 17px 22px; /* ~+20% size */
    gap: 8px;
  }
  .p-toast-summary {
    font-weight: 700;
    font-family: var(--font-sans); /* use sans instead of comfortaa */
    font-size: 1.2rem; /* ~+20% */
    letter-spacing: 0.2px;
  }
  .p-toast-detail {
    color: var(--text-secondary);
    font-family: var(--font-sans); /* use sans instead of comfortaa */
    font-size: 1.1rem; /* ~+20% */
  }
  .p-toast-icon-close {
    color: var(--text-third);
    cursor: pointer;
    pointer-events: auto;
    z-index: 10;
    position: relative;
    transition: all 0.2s ease;
    
    &:hover {
      color: var(--text-primary);
      transform: scale(1.1);
    }
    
    &:active {
      transform: scale(0.95);
    }
  }
  
  /* Убеждаемся, что кнопка закрытия доступна для кликов */
  .p-toast-message-close {
    cursor: pointer;
    pointer-events: auto;
    z-index: 10;
    position: relative;
    
    &:hover .p-toast-icon-close {
      color: var(--text-primary);
    }
  }
  
  /* Убираем блокировку pointer-events на сообщении */
  .p-toast-message {
    pointer-events: auto;
  }
  
  .p-toast-message-content {
    pointer-events: auto;
  }
  .p-toast-message-warn {
    border-left: 3px solid var(--primary-violet);
  }
  
  .p-toast-message-error {
    border: 2px solid rgba(239, 68, 68, 0.6);
  }
}

/* Отключаем transition для padding-top когда хедер в верху страницы */
body.header-at-top {
  .settings-profile-container,
  .settings-appearance-container,
  .settings-support-container,
  .settings-sessions-container,
  .settings-subscription-container,
  .settings-privacy-container,
  .settings-another-container,
  .faq-container,
  .faq-detail-container,
  .faq-help-container,
  .faq-changes-container,
  .faq-user-ranks-container,
  .faq-clan-ranks-container,
  .faq-keywords-container,
  .legal-community-rules-container,
  .legal-content-rules-container,
  .legal-terms-of-use-container,
  .legal-privacy-policy-container,
  .legal-security-container,
  .legal-copyright-policy-container,
  .legal-another-container,
  .notifications-container,
  .stared-articles-page,
  .full-article-page,
  .articles-container {
    transition: none !important;
    transition-property: none !important;
    -webkit-transition: none !important;
    -moz-transition: none !important;
    -o-transition: none !important;
  }
}

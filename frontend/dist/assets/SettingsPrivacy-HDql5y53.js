import{d as Ms,u as Ls,r as a,e as L,w as m,i as n,k as es,j as s,l as c,C as ms,t,v as p,O as h,m as g,y as N,aJ as Ns,E as r,_ as Us}from"./index-Cha8mMNk.js";import{S as Ss}from"./SettingsSidebar-DuW0PyZ3.js";const U={maxNicknameLength:24,maxPasswordLength:48,maxEmailLength:254,nicknamePattern:/^[A-Za-z0-9._-]{1,24}$/,passwordPattern:/^[\x20-\x7E]{1,48}$/},Os=/[A-Za-z0-9._-]/;function Hs(u){if(!u)return"";let i="";for(const v of u)Os.test(v)&&(i+=v);return i.slice(0,U.maxNicknameLength)}function Is(u){if(!u)return"";let i="";for(const v of u){const d=v.charCodeAt(0);d>=32&&d<=126&&(i+=v)}return i.slice(0,U.maxPasswordLength)}function qs(u){const i=(u||"").trim();return i?i.length<3?{isValid:!1,message:"Nickname must be at least 3 characters"}:U.nicknamePattern.test(i)?{isValid:!0,message:""}:{isValid:!1,message:"Nickname is invalid (A–Z, a–z, 0–9, . _ -, max 24)"}:{isValid:!1,message:"Nickname is required"}}function zs(u){const i=(u||"").trim();return i?i.length<6?{isValid:!1,message:"Password must be at least 6 characters"}:U.passwordPattern.test(i)?{isValid:!0,message:""}:{isValid:!1,message:"Password is invalid (printable ASCII, max 48)"}:{isValid:!1,message:"Password is required"}}function Ts(u){const i=(u||"").trim();return i?i.length>U.maxEmailLength?{isValid:!1,message:"Email is too long (max 254 characters)"}:i.includes("@")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?{isValid:!0,message:""}:{isValid:!1,message:"Email format is invalid"}:{isValid:!1,message:"Email must contain @"}:{isValid:!1,message:"Email is required"}}function Bs(){return{sanitizeNickname:Hs,sanitizePassword:Is,validateNickname:qs,validatePassword:zs,validateEmail:Ts,VALIDATION_CONFIG:U}}const Zs={class:"settings-privacy-container"},Ys={class:"main-body"},Gs={class:"content"},Js={class:"security-section"},Ks={class:"section-title"},Rs={class:"section-subtitle"},Ws={class:"security-options"},js={class:"security-option"},Qs={class:"option-info"},Xs={class:"option-title"},xs={class:"option-subtitle"},se={class:"security-option"},ee={class:"option-info"},te={class:"option-title"},oe={class:"option-subtitle"},ae={class:"security-option"},le={class:"option-info"},ie={class:"option-title"},ne={class:"option-subtitle"},re={class:"security-option"},ce={class:"option-info"},de={class:"option-title"},ue={class:"option-subtitle"},pe={class:"data-section"},ve={class:"section-title"},me={class:"section-subtitle"},he={class:"data-options"},ge={class:"data-option"},_e={class:"option-info"},fe={class:"option-title danger"},ye={class:"option-subtitle"},be={class:"data-option"},ke={class:"option-info"},$e={class:"option-title danger"},Pe={class:"option-subtitle"},we={class:"data-option"},Ee={class:"option-info"},Ce={class:"option-title danger"},Ae={class:"option-subtitle"},Fe={class:"modal-header"},Ve={class:"modal-title"},De={class:"modal-body"},Me={class:"form-group"},Le={class:"form-label"},Ne=["placeholder"],Ue={key:0,class:"error-message"},Se={class:"form-group"},Oe={class:"form-label"},He=["placeholder"],Ie={key:0,class:"error-message"},qe={class:"form-group"},ze={class:"form-label"},Te=["placeholder"],Be={key:0,class:"error-message"},Ze={class:"modal-footer"},Ye=["disabled"],Ge={class:"modal-header"},Je={class:"modal-title"},Ke={class:"modal-body"},Re={class:"form-group"},We={class:"form-label"},je=["placeholder"],Qe={key:0,class:"error-message"},Xe={class:"form-group"},xe={class:"form-label"},st=["placeholder"],et={key:0,class:"error-message"},tt={class:"form-group"},ot={class:"form-label"},at=["placeholder"],lt={key:0,class:"error-message"},it={class:"modal-footer"},nt=["disabled"],rt={class:"modal-header"},ct={class:"modal-title"},dt={class:"modal-body"},ut={class:"twofa-info"},pt={class:"info-text"},vt={class:"qr-code-placeholder"},mt={class:"qr-code"},ht={class:"info-text"},gt={class:"manual-code"},_t={class:"form-group"},ft={class:"form-label"},yt=["placeholder"],bt={key:0,class:"error-message"},kt={class:"modal-footer"},$t=["disabled"],Pt={class:"modal-header"},wt={class:"modal-title danger"},Et={class:"modal-body"},Ct={class:"warning-section"},At={class:"warning-text"},Ft={class:"warning-description"},Vt={class:"form-group"},Dt={class:"form-label"},Mt=["placeholder"],Lt={key:0,class:"error-message"},Nt={class:"form-group"},Ut={class:"form-label"},St=["placeholder"],Ot={key:0,class:"error-message"},Ht={class:"modal-footer"},It=["disabled"],qt={class:"modal-header"},zt={class:"modal-title"},Tt={class:"modal-body"},Bt={class:"warning-section"},Zt={class:"warning-text"},Yt={class:"warning-description"},Gt={class:"form-group"},Jt={class:"form-label"},Kt=["placeholder"],Rt={key:0,class:"error-message"},Wt={class:"modal-footer"},jt=["disabled"],Qt={class:"modal-header"},Xt={class:"modal-title"},xt={class:"modal-body"},so={class:"warning-section"},eo={class:"warning-text"},to={class:"warning-description"},oo={class:"form-group"},ao={class:"form-label"},lo={value:"1"},io={value:"24"},no={value:"168"},ro={value:"720"},co={class:"form-group"},uo={class:"form-label"},po=["placeholder"],vo={key:0,class:"error-message"},mo={class:"modal-footer"},ho=["disabled"],go=Ms({__name:"SettingsPrivacy",setup(u){const{t:i}=Ls(),{validateEmail:v,validatePassword:d}=Bs(),W=a(!1),j=a(!1),Q=a(!1),X=a(!1),x=a(!1),ss=a(!1),F=a(""),V=a(""),S=a(""),y=a(""),b=a(""),k=a(""),O=a(""),D=a(""),H=a(""),$=a(""),P=a(""),_=a(""),M=a(""),f=a(""),hs=a("ABCD EFGH IJKL MNOP QRST UVWX YZ12 3456"),I=a(""),q=a(""),w=a(""),E=a(""),z=a(""),C=a(""),T=a("24"),B=a(""),A=a(""),ts=L(()=>F.value&&V.value&&S.value&&!y.value&&!b.value&&!k.value),os=L(()=>O.value&&D.value&&H.value&&!$.value&&!P.value&&!_.value),as=L(()=>M.value.length===6&&!f.value),ls=L(()=>I.value==="DELETE"&&q.value&&!w.value&&!E.value),is=L(()=>z.value&&!C.value),ns=L(()=>B.value&&!A.value);m(F,e=>{e?y.value=v(e).isValid?"":v(e).message:y.value=""}),m(V,e=>{e?b.value=v(e).isValid?"":v(e).message:b.value=""}),m(S,e=>{e?k.value=d(e).isValid?"":d(e).message:k.value=""}),m(O,e=>{e?$.value=d(e).isValid?"":d(e).message:$.value=""}),m(D,e=>{e?P.value=d(e).isValid?"":d(e).message:P.value=""}),m(H,e=>{e&&e!==D.value?_.value="Passwords do not match":_.value=""}),m(M,e=>{e?/^\d{6}$/.test(e)?f.value="":f.value="Code must be 6 digits":f.value=""}),m(I,e=>{e&&e!=="DELETE"?w.value='Please type "DELETE" exactly':w.value=""}),m(q,e=>{e?E.value=d(e).isValid?"":d(e).message:E.value=""}),m(z,e=>{e?C.value=d(e).isValid?"":d(e).message:C.value=""}),m(B,e=>{e?A.value=d(e).isValid?"":d(e).message:A.value=""});const gs=()=>{W.value=!0,rs()},Z=()=>{W.value=!1,rs()},_s=()=>{j.value=!0,cs()},Y=()=>{j.value=!1,cs()},fs=()=>{Q.value=!0,ds()},G=()=>{Q.value=!1,ds()},ys=()=>{X.value=!0,us()},J=()=>{X.value=!1,us()},bs=()=>{x.value=!0,ps()},K=()=>{x.value=!1,ps()},ks=()=>{ss.value=!0,vs()},R=()=>{ss.value=!1,vs()},rs=()=>{F.value="",V.value="",S.value="",y.value="",b.value="",k.value=""},cs=()=>{O.value="",D.value="",H.value="",$.value="",P.value="",_.value=""},ds=()=>{M.value="",f.value=""},us=()=>{I.value="",q.value="",w.value="",E.value=""},ps=()=>{z.value="",C.value=""},vs=()=>{B.value="",A.value="",T.value="24"},$s=async()=>{if(ts.value)try{console.log("Changing email:",{currentEmail:F.value,newEmail:V.value}),alert("Email change request sent! Check your new email for confirmation."),Z()}catch(e){console.error("Error changing email:",e),alert("Error changing email. Please try again.")}},Ps=async()=>{if(os.value)try{console.log("Changing password"),alert("Password changed successfully!"),Y()}catch(e){console.error("Error changing password:",e),alert("Error changing password. Please try again.")}},ws=async()=>{if(as.value)try{console.log("Setting up 2FA with code:",M.value),alert("2FA enabled successfully!"),G()}catch(e){console.error("Error setting up 2FA:",e),alert("Error setting up 2FA. Please try again.")}},Es=async()=>{try{console.log("Downloading user data"),alert("Data download started! You will receive an email with the download link.")}catch(e){console.error("Error downloading data:",e),alert("Error downloading data. Please try again.")}},Cs=async()=>{if(ls.value)try{console.log("Deleting account"),alert("Account deletion request submitted. You will receive a confirmation email."),J()}catch(e){console.error("Error deleting account:",e),alert("Error deleting account. Please try again.")}},As=async()=>{if(is.value)try{console.log("Hiding profile"),alert("Profile hidden successfully!"),K()}catch(e){console.error("Error hiding profile:",e),alert("Error hiding profile. Please try again.")}},Fs=async()=>{if(ns.value)try{console.log("Locking profile for",T.value,"hours"),alert(`Profile locked for ${T.value} hours!`),R()}catch(e){console.error("Error locking profile:",e),alert("Error locking profile. Please try again.")}};return(e,o)=>{const Vs=ms("AppHeader"),Ds=ms("AppFooter");return r(),n("div",Zs,[es(Vs),s("div",Ys,[es(Ss),s("div",Gs,[s("div",Js,[s("h1",Ks,t(e.$t("settings.privacy.h1")),1),s("h2",Rs,t(e.$t("settings.privacy.subtitle")),1),s("div",Ws,[s("div",js,[s("div",Qs,[s("h1",Xs,t(e.$t("settings.privacy.h2")),1),s("h2",xs,t(e.$t("settings.privacy.subtitle2")),1)]),s("button",{class:"option-button",onClick:gs},t(e.$t("settings.privacy.buttons.changeEmail")),1)]),s("div",se,[s("div",ee,[s("h1",te,t(e.$t("settings.privacy.h3")),1),s("h2",oe,t(e.$t("settings.privacy.subtitle3")),1)]),s("button",{class:"option-button",onClick:_s},t(e.$t("settings.privacy.buttons.changePassword")),1)]),s("div",ae,[s("div",le,[s("h1",ie,t(e.$t("settings.privacy.h4")),1),s("h2",ne,t(e.$t("settings.privacy.subtitle4")),1)]),s("button",{class:"option-button",onClick:fs},t(e.$t("settings.privacy.buttons.add2FA")),1)]),s("div",re,[s("div",ce,[s("h1",de,t(e.$t("settings.privacy.h5")),1),s("h2",ue,t(e.$t("settings.privacy.subtitle5")),1)]),s("button",{class:"option-button",onClick:Es},t(e.$t("settings.privacy.buttons.downloadData")),1)])])]),s("div",pe,[s("h1",ve,t(e.$t("settings.privacy.h6")),1),s("h2",me,t(e.$t("settings.privacy.subtitle6")),1),s("div",he,[s("div",ge,[s("div",_e,[s("h1",fe,t(e.$t("settings.privacy.h7")),1),s("h2",ye,t(e.$t("settings.privacy.subtitle7")),1)]),s("button",{class:"option-button danger",onClick:ys},t(e.$t("settings.privacy.buttons.deleteAccount")),1)]),s("div",be,[s("div",ke,[s("h1",$e,t(e.$t("settings.privacy.h8")),1),s("h2",Pe,t(e.$t("settings.privacy.subtitle8")),1)]),s("button",{class:"option-button danger",onClick:bs},t(e.$t("settings.privacy.buttons.hideProfile")),1)]),s("div",we,[s("div",Ee,[s("h1",Ce,t(e.$t("settings.privacy.h9")),1),s("h2",Ae,t(e.$t("settings.privacy.subtitle9")),1)]),s("button",{class:"option-button danger",onClick:ks},t(e.$t("settings.privacy.buttons.lockProfile")),1)])])])])]),es(Ds),W.value?(r(),n("div",{key:0,class:"modal-overlay",onClick:Z},[s("div",{class:"modal-content",onClick:o[3]||(o[3]=N(()=>{},["stop"]))},[s("div",Fe,[s("h1",Ve,t(e.$t("settings.privacy.panels.email.title")),1),s("button",{class:"modal-close",onClick:Z},"×")]),s("div",De,[s("div",Me,[s("label",Le,t(e.$t("settings.privacy.panels.email.h1")),1),p(s("input",{type:"email",class:g(["form-input",{error:y.value}]),"onUpdate:modelValue":o[0]||(o[0]=l=>F.value=l),placeholder:e.$t("settings.privacy.panels.email.input1")},null,10,Ne),[[h,F.value]]),y.value?(r(),n("p",Ue,t(y.value),1)):c("",!0)]),s("div",Se,[s("label",Oe,t(e.$t("settings.privacy.panels.email.h2")),1),p(s("input",{type:"email",class:g(["form-input",{error:b.value}]),"onUpdate:modelValue":o[1]||(o[1]=l=>V.value=l),placeholder:e.$t("settings.privacy.panels.email.input2")},null,10,He),[[h,V.value]]),b.value?(r(),n("p",Ie,t(b.value),1)):c("",!0)]),s("div",qe,[s("label",ze,t(e.$t("settings.privacy.panels.email.h3")),1),p(s("input",{type:"password",class:g(["form-input",{error:k.value}]),"onUpdate:modelValue":o[2]||(o[2]=l=>S.value=l),placeholder:e.$t("settings.privacy.panels.email.input3")},null,10,Te),[[h,S.value]]),k.value?(r(),n("p",Be,t(k.value),1)):c("",!0)])]),s("div",Ze,[s("button",{class:"modal-button secondary",onClick:Z},t(e.$t("settings.privacy.panels.email.button1")),1),s("button",{class:"modal-button primary",onClick:$s,disabled:!ts.value},t(e.$t("settings.privacy.panels.email.button2")),9,Ye)])])])):c("",!0),j.value?(r(),n("div",{key:1,class:"modal-overlay",onClick:Y},[s("div",{class:"modal-content",onClick:o[7]||(o[7]=N(()=>{},["stop"]))},[s("div",Ge,[s("h1",Je,t(e.$t("settings.privacy.panels.password.title")),1),s("button",{class:"modal-close",onClick:Y},"×")]),s("div",Ke,[s("div",Re,[s("label",We,t(e.$t("settings.privacy.panels.password.h1")),1),p(s("input",{type:"password",class:g(["form-input",{error:$.value}]),"onUpdate:modelValue":o[4]||(o[4]=l=>O.value=l),placeholder:e.$t("settings.privacy.panels.password.input1")},null,10,je),[[h,O.value]]),$.value?(r(),n("p",Qe,t($.value),1)):c("",!0)]),s("div",Xe,[s("label",xe,t(e.$t("settings.privacy.panels.password.h2")),1),p(s("input",{type:"password",class:g(["form-input",{error:P.value}]),"onUpdate:modelValue":o[5]||(o[5]=l=>D.value=l),placeholder:e.$t("settings.privacy.panels.password.input2")},null,10,st),[[h,D.value]]),P.value?(r(),n("p",et,t(P.value),1)):c("",!0)]),s("div",tt,[s("label",ot,t(e.$t("settings.privacy.panels.password.h3")),1),p(s("input",{type:"password",class:g(["form-input",{error:_.value}]),"onUpdate:modelValue":o[6]||(o[6]=l=>H.value=l),placeholder:e.$t("settings.privacy.panels.password.input3")},null,10,at),[[h,H.value]]),_.value?(r(),n("p",lt,t(_.value),1)):c("",!0)])]),s("div",it,[s("button",{class:"modal-button secondary",onClick:Y},t(e.$t("settings.privacy.panels.password.button1")),1),s("button",{class:"modal-button primary",onClick:Ps,disabled:!os.value},t(e.$t("settings.privacy.panels.password.button2")),9,nt)])])])):c("",!0),Q.value?(r(),n("div",{key:2,class:"modal-overlay",onClick:G},[s("div",{class:"modal-content",onClick:o[9]||(o[9]=N(()=>{},["stop"]))},[s("div",rt,[s("h1",ct,t(e.$t("settings.privacy.panels.2FA.title")),1),s("button",{class:"modal-close",onClick:G},"×")]),s("div",dt,[s("div",ut,[s("p",pt,t(e.$t("settings.privacy.panels.2FA.subtitle")),1),s("div",vt,[s("div",mt,t(e.$t("settings.privacy.panels.2FA.qrCode")),1)]),s("p",ht,t(e.$t("settings.privacy.panels.2FA.subtitle2")),1),s("div",gt,t(hs.value),1)]),s("div",_t,[s("label",ft,t(e.$t("settings.privacy.panels.2FA.h1")),1),p(s("input",{type:"text",class:g(["form-input",{error:f.value}]),"onUpdate:modelValue":o[8]||(o[8]=l=>M.value=l),placeholder:e.$t("settings.privacy.panels.2FA.input2"),maxlength:"6"},null,10,yt),[[h,M.value]]),f.value?(r(),n("p",bt,t(f.value),1)):c("",!0)])]),s("div",kt,[s("button",{class:"modal-button secondary",onClick:G},t(e.$t("settings.privacy.panels.2FA.button1")),1),s("button",{class:"modal-button primary",onClick:ws,disabled:!as.value},t(e.$t("settings.privacy.panels.2FA.button2")),9,$t)])])])):c("",!0),X.value?(r(),n("div",{key:3,class:"modal-overlay",onClick:J},[s("div",{class:"modal-content danger-modal",onClick:o[12]||(o[12]=N(()=>{},["stop"]))},[s("div",Pt,[s("h1",wt,t(e.$t("settings.privacy.panels.deleteAccount.title")),1),s("button",{class:"modal-close",onClick:J},"×")]),s("div",Et,[s("div",Ct,[s("p",At,t(e.$t("settings.privacy.panels.deleteAccount.subtitle")),1),s("p",Ft,t(e.$t("settings.privacy.panels.deleteAccount.subtitle")),1)]),s("div",Vt,[s("label",Dt,t(e.$t("settings.privacy.panels.deleteAccount.h1")),1),p(s("input",{type:"text",class:g(["form-input",{error:w.value}]),"onUpdate:modelValue":o[10]||(o[10]=l=>I.value=l),placeholder:e.$t("settings.privacy.panels.deleteAccount.input1")},null,10,Mt),[[h,I.value]]),w.value?(r(),n("p",Lt,t(w.value),1)):c("",!0)]),s("div",Nt,[s("label",Ut,t(e.$t("settings.privacy.panels.deleteAccount.h2")),1),p(s("input",{type:"password",class:g(["form-input",{error:E.value}]),"onUpdate:modelValue":o[11]||(o[11]=l=>q.value=l),placeholder:e.$t("settings.privacy.panels.deleteAccount.input2")},null,10,St),[[h,q.value]]),E.value?(r(),n("p",Ot,t(E.value),1)):c("",!0)])]),s("div",Ht,[s("button",{class:"modal-button secondary",onClick:J},t(e.$t("settings.privacy.panels.deleteAccount.button1")),1),s("button",{class:"modal-button danger",onClick:Cs,disabled:!ls.value},t(e.$t("settings.privacy.panels.deleteAccount.button2")),9,It)])])])):c("",!0),x.value?(r(),n("div",{key:4,class:"modal-overlay",onClick:K},[s("div",{class:"modal-content",onClick:o[14]||(o[14]=N(()=>{},["stop"]))},[s("div",qt,[s("h1",zt,t(e.$t("settings.privacy.panels.hideProfile.title")),1),s("button",{class:"modal-close",onClick:K},"×")]),s("div",Tt,[s("div",Bt,[s("p",Zt,t(e.$t("settings.privacy.panels.hideProfile.h1")),1),s("p",Yt,t(e.$t("settings.privacy.panels.hideProfile.subtitle")),1)]),s("div",Gt,[s("label",Jt,t(e.$t("settings.privacy.panels.hideProfile.h2")),1),p(s("input",{type:"password",class:g(["form-input",{error:C.value}]),"onUpdate:modelValue":o[13]||(o[13]=l=>z.value=l),placeholder:e.$t("settings.privacy.panels.hideProfile.input1")},null,10,Kt),[[h,z.value]]),C.value?(r(),n("p",Rt,t(C.value),1)):c("",!0)])]),s("div",Wt,[s("button",{class:"modal-button secondary",onClick:K},t(e.$t("settings.privacy.panels.hideProfile.button1")),1),s("button",{class:"modal-button primary",onClick:As,disabled:!is.value},t(e.$t("settings.privacy.panels.hideProfile.button2")),9,jt)])])])):c("",!0),ss.value?(r(),n("div",{key:5,class:"modal-overlay",onClick:R},[s("div",{class:"modal-content",onClick:o[17]||(o[17]=N(()=>{},["stop"]))},[s("div",Qt,[s("h1",Xt,t(e.$t("settings.privacy.panels.lockProfile.title")),1),s("button",{class:"modal-close",onClick:R},"×")]),s("div",xt,[s("div",so,[s("p",eo,t(e.$t("settings.privacy.panels.lockProfile.h1")),1),s("p",to,t(e.$t("settings.privacy.panels.lockProfile.subtitle")),1)]),s("div",oo,[s("label",ao,t(e.$t("settings.privacy.panels.lockProfile.h2")),1),p(s("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=l=>T.value=l)},[s("option",lo,t(e.$t("settings.privacy.panels.lockProfile.lockDuration.1")),1),s("option",io,t(e.$t("settings.privacy.panels.lockProfile.lockDuration.24")),1),s("option",no,t(e.$t("settings.privacy.panels.lockProfile.lockDuration.168")),1),s("option",ro,t(e.$t("settings.privacy.panels.lockProfile.lockDuration.720")),1)],512),[[Ns,T.value]])]),s("div",co,[s("label",uo,t(e.$t("settings.privacy.panels.lockProfile.h3")),1),p(s("input",{type:"password",class:g(["form-input",{error:A.value}]),"onUpdate:modelValue":o[16]||(o[16]=l=>B.value=l),placeholder:e.$t("settings.privacy.panels.lockProfile.input1")},null,10,po),[[h,B.value]]),A.value?(r(),n("p",vo,t(A.value),1)):c("",!0)])]),s("div",mo,[s("button",{class:"modal-button secondary",onClick:R},t(e.$t("settings.privacy.panels.lockProfile.button1")),1),s("button",{class:"modal-button primary",onClick:Fs,disabled:!ns.value},t(e.$t("settings.privacy.panels.lockProfile.button2")),9,ho)])])])):c("",!0)])}}}),yo=Us(go,[["__scopeId","data-v-9ba42d59"]]);export{yo as default};

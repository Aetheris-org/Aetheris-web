import{Q as ee,aB as De,aC as Se,d as Ee,u as Te,c as Le,a as Ve,r as c,e as Ne,L as O,w as J,o as Re,i as u,k as D,j as a,C as X,s as r,t as s,A as Y,B as le,v as re,l as L,O as ie,m as N,y as ne,T as de,n as ce,E as v,_ as Pe}from"./index-Cha8mMNk.js";import{S as $e}from"./SettingsSidebar-DuW0PyZ3.js";import{A as He}from"./AvatarCropper-CrIIn-tx.js";function ue(i){const o=Se(i.avatar);return{id:i.id,nickname:i.username,email:"",avatar:o,bio:i.bio||void 0,articlesCount:0,commentsCount:0,likesReceived:0,viewsReceived:0,createdAt:i.createdAt||i.created_at||new Date().toISOString(),status:"active",role:"user",isVerified:!1,isProfilePublic:!0,showEmail:!1,showLastSeen:!1,reputation:0,level:1,experience:0}}async function Oe(i){const o=new FormData;o.append("files",i);const d=await ee.post("/api/upload",o,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4});if(!d.data?.[0])throw new Error("No response from server");return d.data[0].id}async function j(i){const o={};i.username!==void 0&&(o.username=i.username),i.bio!==void 0&&(o.bio=i.bio),i.avatar!==void 0&&(o.avatar=i.avatar);const d=await ee.put("/api/users/me",De(o),{timeout:1e4,params:{populate:{avatar:{fields:["url"]}}}});if(!d.data)throw new Error("No data returned from server");return ue(d.data)}async function je(){const i=await ee.get("/api/users/me",{timeout:1e4,params:{populate:{avatar:{fields:["url"]}}}});if(!i.data)throw new Error("No data returned from server");return ue(i.data)}async function Ie(i){return new Promise((z,m)=>{const y=new FileReader;y.onload=n=>{const f=new Image;f.onload=()=>{let g=f.width,U=f.height;if(g>120||U>120){const w=Math.min(120/g,120/U);g=Math.round(g*w),U=Math.round(U*w)}const S=document.createElement("canvas");S.width=g,S.height=U;const _=S.getContext("2d");if(!_){m(new Error("Failed to get canvas context"));return}_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(f,0,0,g,U);const k=w=>{S.toBlob(M=>{if(!M){m(new Error("Failed to compress image"));return}const b=M.size/1024;if(b>10&&w>.5)k(Math.max(.5,w-.05));else{const F=i.name.replace(/\.[^/.]+$/,".jpg")||"avatar.jpg",R=new File([M],F,{type:"image/jpeg"});console.log(`âœ… Avatar optimized: ${b.toFixed(2)}KB (${g}x${U}, quality: ${w.toFixed(2)})`),z(R)}},"image/jpeg",w)};k(.7)},f.onerror=()=>{m(new Error("Failed to load image"))},f.src=n.target?.result},y.onerror=()=>{m(new Error("Failed to read file"))},y.readAsDataURL(i)})}const Ke={class:"settings-profile-container"},We={key:0,class:"unauthorized-message"},Ze={class:"unauthorized-content-inline"},qe={key:1,class:"main-body"},Qe={class:"content"},Ge={class:"profile-section"},Je={class:"section-title"},Xe={class:"section-subtitle"},Ye={class:"section-title"},et={class:"avatar-section"},tt={class:"avatar-placeholder"},at=["src"],ot={key:1,class:"avatar-fallback"},st={class:"avatar-buttons"},lt=["disabled"],rt=["disabled"],it={class:"section-title"},nt={class:"section-subtitle"},dt=["placeholder"],ct={key:0,class:"error-message"},ut={class:"bio-section"},vt={class:"section-title"},pt={class:"section-subtitle"},mt=["placeholder"],ft={key:0,class:"error-message"},gt={class:"character-count"},ht={class:"modal-header"},_t={class:"modal-title"},yt={key:0,class:"cropper-section"},wt={class:"dropzone-content"},kt={class:"dropzone-title"},bt={class:"dropzone-subtitle"},Ct={class:"dropzone-info"},At={key:2,class:"preview-area"},Ut={class:"preview-info"},Mt={class:"file-name"},xt={class:"file-size"},zt={class:"modal-footer"},Bt={class:"footer-left"},Ft={class:"footer-right"},Dt=["disabled"],St={key:0,class:"button-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Et={key:1},Tt={key:2},Lt={key:3},Vt={class:"modal-header"},Nt={class:"modal-title"},Rt={class:"modal-body"},Pt={class:"warning-title"},$t={class:"warning-message"},Ht={class:"modal-footer"},Ot=Ee({__name:"SettingsProfile",setup(i){const{t:o}=Te(),d=Le(),z=Ve(),m=c(""),y=c(""),n=c(null),f=c(!1),g=Ne(()=>f.value?null:O(n.value)),U=e=>{const t=e?.target;console.error("âŒ Failed to load avatar image:"),console.error("  - URL:",n.value),console.error("  - img.src:",t?.src),t&&(console.error("  - img.complete:",t.complete),console.error("  - img.naturalWidth:",t.naturalWidth),console.error("  - img.naturalHeight:",t.naturalHeight)),f.value=!0},S=e=>{e?.target,f.value=!1};J(()=>n.value,()=>{f.value=!1});const _=c(""),k=c(""),w=c(!1),M=c(!1),b=c(null),F=c(""),R=c(null),h=c(!1),x=c(!1),C=c(!1),E=c(null),I=c(null),P=c(""),$=c(""),K=c(!1),te=c(!1);Re(async()=>{te.value=!0;try{const e=await Promise.race([je(),new Promise((V,A)=>setTimeout(()=>A(new Error("Request timeout")),1e4))]),t=e.nickname||"",l=e.bio||"";P.value=t,$.value=l,m.value=t,y.value=l,n.value=e.avatar||null;const p=O(n.value);console.log("ðŸ“¥ Profile loaded:"),console.log("  - user.avatar (raw):",e.avatar),console.log("  - user.avatar type:",typeof e.avatar),console.log("  - currentAvatar.value:",n.value),console.log("  - currentAvatar.value type:",typeof n.value),console.log("  - safeAvatarUrl result:",p),console.log("  - safeAvatarUrl type:",typeof p),console.log("  - avatarError:",f.value),e.avatar&&!p&&console.error("âŒ Avatar URL failed validation:",e.avatar),z.setUser(e)}catch(e){console.error("Failed to load profile:",e),e.message!=="Request timeout"?d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:e.response?.data?.detail||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ",life:3e3}):d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:"ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ.",life:4e3})}finally{te.value=!1}});const ve=e=>e.trim()?e.length>50?"Nickname must be no more than 50 characters":/^[a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘Ð\s]+$/.test(e)?"":"Nickname can only contain Latin letters, Cyrillic letters and spaces":"Nickname is required",pe=e=>e.length>300?"Bio must be no more than 300 characters":"";J(m,e=>{const t=e.replace(/[^a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘Ð\s]/g,"");if(t!==e){m.value=t;return}_.value=ve(m.value);const l=m.value.trim();l!==P.value&&!_.value&&l&&me()}),J(y,e=>{k.value=pe(e),y.value.trim()!==$.value&&!k.value&&fe()});let W=null,Z=null;const me=()=>{W&&clearTimeout(W),W=setTimeout(async()=>{!_.value&&m.value.trim()&&!x.value&&await ge()},1e3)},fe=()=>{Z&&clearTimeout(Z),Z=setTimeout(async()=>{!k.value&&!x.value&&await he()},1e3)},ge=async()=>{const e=m.value.trim();if(e!==P.value&&!(_.value||!e||x.value)){x.value=!0;try{const t=await j({username:e});z.setUser(t),P.value=e,d.add({severity:"success",summary:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",detail:"ÐÐ¸ÐºÐ½ÐµÐ¹Ð¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½",life:2e3})}catch(t){const l=t.response?.data?.detail||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð½Ð¸ÐºÐ½ÐµÐ¹Ð¼";d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:l,life:3e3})}finally{x.value=!1}}},he=async()=>{const e=y.value.trim();if(e!==$.value&&!(k.value||x.value)){x.value=!0;try{const t=await j({bio:e||null});z.setUser(t),$.value=e,d.add({severity:"success",summary:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",detail:"Ð‘Ð¸Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°",life:2e3})}catch(t){const l=t.response?.data?.detail||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð±Ð¸Ð¾Ð³Ñ€Ð°Ñ„Ð¸ÑŽ";d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:l,life:3e3})}finally{x.value=!1}}},_e=()=>{w.value=!0,ae()},q=()=>{w.value=!1,ae()},ae=()=>{b.value=null,F.value="",M.value=!1,C.value=!1,E.value=null},ye=()=>{C.value=!1,E.value=null,F.value=""},oe=()=>{R.value?.click()},we=e=>{const l=e.target.files?.[0];l&&se(l)},ke=e=>{e.preventDefault(),M.value=!1;const t=e.dataTransfer?.files;t&&t.length>0&&se(t[0])},be=e=>{e.preventDefault(),M.value=!0},Ce=e=>{e.preventDefault(),M.value=!1},se=async e=>{if(!e.type.startsWith("image/")){d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ",life:3e3});return}if(e.size>5*1024*1024){d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:"Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÐµÐµ 5MB",life:3e3});return}b.value=e;const t=new FileReader;t.onload=l=>{F.value=l.target?.result,C.value=!0},t.readAsDataURL(e)},Ae=e=>{E.value=e},Ue=async()=>{if(C.value&&I.value)try{const e=await I.value.getCroppedImage();E.value=e}catch(e){console.error("Crop error:",e),d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ñ€ÐµÐ·Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ",life:3e3});return}await xe()},Me=e=>{if(e===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,p)).toFixed(2))+" "+l[p]},xe=async()=>{const e=E.value||b.value;if(!e||h.value)return;h.value=!0;let t=null;try{console.log("ðŸ”„ Optimizing avatar before upload...");const l=e.size/1024;console.log(`  - Original size: ${l.toFixed(2)}KB`);const p=await Ie(e),V=p.size/1024;if(console.log(`  - Optimized size: ${V.toFixed(2)}KB (saved ${(l-V).toFixed(2)}KB)`),t=await Promise.race([Oe(p),new Promise((Fe,G)=>setTimeout(()=>G(new Error("Upload timeout")),12e4))]),!t)throw new Error("No avatar URL returned");const A=await Promise.race([j({avatar:t}),new Promise((Fe,G)=>setTimeout(()=>G(new Error("Update timeout")),1e4))]);f.value=!1;const B=A.avatar||t,Q=O(B);console.log("âœ… Avatar upload complete:"),console.log("  - serverAvatarUrl (from upload):",t),console.log("  - serverAvatarUrl type:",typeof t),console.log("  - updatedUser.avatar (from server response):",A.avatar),console.log("  - updatedUser.avatar type:",typeof A.avatar),console.log("  - finalAvatarUrl (chosen):",B),console.log("  - finalAvatarUrl type:",typeof B),console.log("  - sanitized result:",Q),console.log("  - sanitized type:",typeof Q),console.log("  - currentAvatar.value (before update):",n.value),!Q&&B&&console.error("âŒ Final avatar URL failed validation:",B),n.value=B,z.setUser(A),await ce(),(!n.value||n.value!==B)&&(console.log("âš ï¸ Forcing avatar update after nextTick"),n.value=B),await ce();const T=document.querySelector(".avatar-image");console.log("âœ… Avatar state after update:"),console.log("  - currentAvatar.value:",n.value),console.log("  - currentAvatar.type:",typeof n.value),console.log("  - safeAvatarUrl.value:",g.value),console.log("  - safeAvatarUrl.type:",typeof g.value),console.log("  - avatarError:",f.value),console.log("  - DOM image element:",T?"FOUND":"NOT FOUND"),T&&(console.log("  - img.src:",T.src),console.log("  - img.complete:",T.complete),console.log("  - img.naturalWidth:",T.naturalWidth),console.log("  - img.naturalHeight:",T.naturalHeight)),!g.value&&n.value&&(console.error("âŒ CRITICAL: Avatar exists but safeAvatarUrl is null!"),console.error("  - currentAvatar:",n.value),console.error("  - validationResult:",O(n.value))),d.add({severity:"success",summary:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",detail:"ÐÐ²Ð°Ñ‚Ð°Ñ€ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½",life:3e3}),h.value=!1,setTimeout(()=>{q()},100)}catch(l){console.error("Avatar upload error:",l);let p="ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð°Ð²Ð°Ñ‚Ð°Ñ€";l.message==="Upload timeout"?p="ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñƒ Ð¸ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°.":l.message==="Update timeout"?p="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°, Ð½Ð¾ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ.":l.response?.data?.detail?p=l.response.data.detail:l.message&&(p=l.message),d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:p,life:5e3})}finally{h.value=!1}},ze=()=>{K.value=!0},H=()=>{K.value=!1},Be=async()=>{if(!(h.value||x.value)){h.value=!0;try{const e=await j({avatar:null});n.value=null,z.setUser(e),d.add({severity:"success",summary:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",detail:"ÐÐ²Ð°Ñ‚Ð°Ñ€ ÑƒÐ´Ð°Ð»ÐµÐ½",life:3e3}),H()}catch(e){console.error("Avatar delete error:",e);const t=e.response?.data?.detail||"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð°Ð²Ð°Ñ‚Ð°Ñ€";d.add({severity:"error",summary:"ÐžÑˆÐ¸Ð±ÐºÐ°",detail:t,life:4e3})}finally{h.value=!1}}};return(e,t)=>{const l=X("AppHeader"),p=X("router-link"),V=X("AppFooter");return v(),u("div",Ke,[D(l),r(z).isAuthenticated?(v(),u("div",qe,[D($e),a("div",Qe,[a("div",Ge,[a("h1",Je,s(r(o)("settings.display_profile.h1")),1),a("h2",Xe,s(r(o)("settings.display_profile.subtitle")),1),a("h1",Ye,s(r(o)("settings.display_profile.h2")),1),a("div",et,[a("div",tt,[g.value?(v(),u("img",{key:0,src:g.value,alt:"Avatar",class:"avatar-image",onError:U,onLoad:S,loading:"eager",referrerpolicy:"no-referrer"},null,40,at)):(v(),u("div",ot,[...t[4]||(t[4]=[a("svg",{class:"avatar-icon",width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),a("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))]),a("div",st,[a("button",{class:"avatar-button",onClick:_e,disabled:h.value},s(h.value?r(o)("settings.display_profile.uploading"):r(o)("settings.display_profile.button1")),9,lt),a("button",{class:"avatar-button",onClick:ze,disabled:!n.value||h.value},s(r(o)("settings.display_profile.button2")),9,rt)])]),a("h1",it,s(r(o)("settings.display_profile.h3")),1),a("h2",nt,s(r(o)("settings.display_profile.subtitle3")),1),re(a("input",{type:"text",placeholder:r(o)("settings.display_profile.input_text1"),class:N(["nickname-input",{error:_.value}]),"onUpdate:modelValue":t[0]||(t[0]=A=>m.value=A)},null,10,dt),[[ie,m.value]]),_.value?(v(),u("p",ct,s(_.value),1)):L("",!0),a("div",ut,[a("h1",vt,s(r(o)("settings.display_profile.h4")),1),a("h2",pt,s(r(o)("settings.display_profile.subtitle4")),1),re(a("textarea",{placeholder:r(o)("settings.display_profile.input_text2"),class:N(["bio-input",{error:k.value}]),"onUpdate:modelValue":t[1]||(t[1]=A=>y.value=A)},null,10,mt),[[ie,y.value]]),k.value?(v(),u("p",ft,s(k.value),1)):L("",!0),a("p",gt,s(y.value.length)+"/300",1)])])])])):(v(),u("div",We,[a("div",Ze,[a("h2",null,s(e.$t("settings.display_profile.notRegistered.title")),1),a("p",null,s(e.$t("settings.display_profile.notRegistered.subtitle")),1),D(p,{to:"/login",class:"btn-primary-inline"},{default:Y(()=>[le(s(e.$t("settings.display_profile.notRegistered.loginButton")),1)]),_:1})])])),D(V),D(de,{name:"modal"},{default:Y(()=>[w.value?(v(),u("div",{key:0,class:"modal-overlay",onClick:q},[a("div",{class:N(["modal-content",{"cropper-modal":C.value}]),onClick:t[2]||(t[2]=ne(()=>{},["stop"]))},[a("div",ht,[a("h2",_t,s(r(o)("settings.display_profile.upload_panel.h1")),1),a("button",{class:"modal-close",onClick:q},[...t[5]||(t[5]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"var(--ico-color)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),a("div",{class:N(["modal-body",{"cropper-body":C.value}])},[C.value&&F.value?(v(),u("div",yt,[D(He,{imageUrl:F.value,onCrop:Ae,ref_key:"cropperRef",ref:I},null,8,["imageUrl"])])):(v(),u("div",{key:1,class:N(["dropzone",{"drag-over":M.value}]),onDrop:ke,onDragover:be,onDragleave:Ce,onClick:oe},[a("div",wt,[t[6]||(t[6]=a("svg",{class:"upload-icon",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15",stroke:"var(--ico-color)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),a("h3",kt,s(r(o)("settings.display_profile.upload_panel.h2")),1),a("p",bt,s(r(o)("settings.display_profile.upload_panel.subtitle")),1),a("p",Ct,s(r(o)("settings.display_profile.upload_panel.info")),1)])],34)),b.value&&!C.value?(v(),u("div",At,[a("div",Ut,[a("p",Mt,s(b.value.name),1),a("p",xt,s(Me(b.value.size)),1)])])):L("",!0)],2),a("div",zt,[a("div",Bt,[C.value?(v(),u("button",{key:0,class:"modal-button secondary",onClick:ye}," â† Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð´Ñ€ÑƒÐ³Ð¾Ðµ ")):(v(),u("button",{key:1,class:"modal-button secondary",onClick:oe},[t[7]||(t[7]=a("svg",{class:"button-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),a("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),le(" "+s(r(o)("settings.display_profile.upload_panel.browse_button")),1)]))]),a("div",Ft,[a("button",{class:"modal-button primary",onClick:Ue,disabled:!b.value&&!E.value||h.value},[h.value?L("",!0):(v(),u("svg",St,[...t[8]||(t[8]=[a("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),h.value?(v(),u("span",Et,s(r(o)("settings.display_profile.uploading")||"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..."),1)):C.value?(v(),u("span",Tt,s(e.$t("settings.display_profile.uploadAvatar")),1)):(v(),u("span",Lt,s(r(o)("settings.display_profile.upload_panel.upload_button")),1))],8,Dt)])])],2)])):L("",!0)]),_:1}),D(de,{name:"modal"},{default:Y(()=>[K.value?(v(),u("div",{key:0,class:"modal-overlay",onClick:H},[a("div",{class:"modal-content delete-modal",onClick:t[3]||(t[3]=ne(()=>{},["stop"]))},[a("div",Vt,[a("h2",Nt,s(r(o)("settings.display_profile.remove_panel.h1")),1),a("button",{class:"modal-close",onClick:H},[...t[9]||(t[9]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M18 6L6 18M6 6L18 18",stroke:"var(--ico-color)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),a("div",Rt,[t[10]||(t[10]=a("div",{class:"warning-icon"},[a("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#FF6B6B","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a("h3",Pt,s(r(o)("settings.display_profile.remove_panel.h1")),1),a("p",$t,s(r(o)("settings.display_profile.remove_panel.subtitle")),1)]),a("div",Ht,[a("button",{class:"modal-button secondary",onClick:H},s(r(o)("settings.display_profile.remove_panel.button1")),1),a("button",{class:"modal-button danger",onClick:Be},s(r(o)("settings.display_profile.remove_panel.button2")),1)])])])):L("",!0)]),_:1}),a("input",{ref_key:"fileInput",ref:R,type:"file",accept:"image/*",onChange:we,style:{display:"none"}},null,544)])}}}),Wt=Pe(Ot,[["__scopeId","data-v-48076d2b"]]);export{Wt as default};

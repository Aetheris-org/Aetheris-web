import{d as D,i,E as a,y as f,j as t,t as d,l as y,F as k,q as x,G as b,s as v,_ as A,e as C,o as $,D as E}from"./index-Cha8mMNk.js";import{s as B}from"./index-CIrCQqjO.js";import{u as L}from"./useUserArticles-CJyDafvF.js";import"./articles-Cl6OgbpY.js";const M={class:"draft-header"},U={class:"draft-meta"},w={class:"draft-sub"},N={class:"draft-author"},S={class:"draft-date"},T={key:0,class:"dot"},F={key:1,class:"draft-difficulty"},H={class:"draft-body"},I={key:0,class:"tags"},O={class:"excerpt"},V={class:"draft-footer"},j={class:"actions"},q=D({__name:"DraftArticleCard",props:{article:{}},emits:["edit","delete","open"],setup(o,{emit:u}){const r=o,c=u,m=()=>c("edit",r.article.id),l=()=>c("delete",r.article.id),p=()=>c("open",r.article.id),_=computed(()=>{const s=r.article.excerpt||r.article.content||"",e=document.createElement("div");return e.innerHTML=s,(e.textContent||e.innerText||"").slice(0,300)});function h(s){return(typeof s=="string"?new Date(s):s).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})}function n(s){return s==="easy"?"Easy":s==="hard"?"Hard":"Medium"}return(s,e)=>(a(),i("div",{class:"draft-card",onClick:e[0]||(e[0]=f(()=>{},["stop"]))},[t("div",M,[t("div",U,[t("h2",{class:"draft-title",onClick:f(p,["stop"])},d(o.article.title),1),t("div",w,[t("span",N,d(o.article.author.username),1),e[1]||(e[1]=t("span",{class:"dot"},"â€¢",-1)),t("span",S,d(h(o.article.createdAt)),1),o.article.difficulty?(a(),i("span",T,"â€¢")):y("",!0),o.article.difficulty?(a(),i("span",F,d(n(o.article.difficulty)),1)):y("",!0)])])]),t("div",H,[o.article.tags?.length?(a(),i("div",I,[(a(!0),i(k,null,x(o.article.tags,g=>(a(),b(v(B),{key:g,class:"tag",value:g},null,8,["value"]))),128))])):y("",!0),t("div",O,d(v(_)),1)]),t("div",V,[e[2]||(e[2]=t("div",{class:"spacer"},null,-1)),t("div",j,[t("button",{type:"button",class:"btn secondary",onClick:f(m,["stop"])},"Edit"),t("button",{type:"button",class:"btn danger",onClick:f(l,["stop"])},"Delete")])])]))}}),G=A(q,[["__scopeId","data-v-fee9f15d"]]),R={class:"draft-page"},z={class:"container"},J={key:0,class:"loading"},K={key:1,class:"empty"},P={key:2,class:"list"},Q=D({__name:"DraftArticles",setup(o){const u=E(),{articles:r,loading:c,fetchUserArticles:m}=L(),l=C(()=>r.value.filter(n=>n.status==="draft"||!n.publishedAt));$(async()=>{console.log("ðŸ”µ DraftArticles mounted"),await m(),console.log("ðŸ“ User articles loaded:",r.value.length),console.log("ðŸ“ Drafts found:",l.value.length)});function p(n){u.push(`/edit-article/${n}`)}function _(n){console.log("delete draft",n)}function h(n){u.push(`/article/${n}`)}return(n,s)=>(a(),i("div",R,[t("div",z,[s[0]||(s[0]=t("h1",{class:"title"},"Drafts",-1)),v(c)?(a(),i("div",J,"Loadingâ€¦")):l.value.length===0?(a(),i("div",K,"No drafts yet")):(a(),i("div",P,[(a(!0),i(k,null,x(l.value,e=>(a(),b(G,{key:e.id,article:e,onEdit:p,onDelete:_,onOpen:h},null,8,["article"]))),128))]))])]))}}),tt=A(Q,[["__scopeId","data-v-60155d75"]]);export{tt as default};

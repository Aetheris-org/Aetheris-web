import{d as z,a as G,r as a,e as c,o as K,f as J,i as d,j as t,m as h,K as O,l as W,s as n,t as u,F as X,q as tt,k as et,B as V,D as ot,E as r,G as st,_ as lt}from"./index-Cha8mMNk.js";import{A as it}from"./ArticleCard-CYaLlIwp.js";import{s as nt}from"./index-BTgU_lKo.js";import{u as at}from"./useUserArticles-CJyDafvF.js";import"./index-CIrCQqjO.js";import"./DeleteConfirmDialog-CrHiTmEy.js";import"./articles-Cl6OgbpY.js";const rt={class:"articles-page"},ct={class:"articles-container"},dt={class:"articles-body"},ut={class:"search-section"},vt={class:"status-filter"},pt={class:"search-container"},ht=["value"],gt={class:"articles-list-container"},wt={key:0,class:"loading-container"},kt={key:1,class:"empty-state"},ft={key:3,class:"pagination-container"},mt={class:"sidebar-section"},bt={class:"article-info-card"},yt={class:"info-item"},Ct={class:"info-value"},Lt={class:"info-item"},xt={class:"info-value"},_t={class:"info-item"},Tt={class:"info-value"},Bt={class:"similar-articles-card"},Mt=z({__name:"YourArticles",setup(At){const g=ot();G();const{articles:w,loading:C,isEmpty:L,fetchUserArticles:S,refreshArticles:k}=at(),l=a("all"),v=c(()=>l.value==="all"?w.value:w.value.filter(e=>e.status===l.value)),x=c(()=>v.value.length),j=c(()=>v.value.reduce((e,o)=>e+(o.likes||0),0)),H=c(()=>v.value.reduce((e,o)=>e+(o.comments_count||0),0)),p=a(0),f=a(10),D=e=>({id:e.id,title:e.title,content:e.content,excerpt:e.excerpt,author:{id:0,username:e.author,avatar:void 0},tags:e.tags,createdAt:e.created_at,status:e.status,likes:e.likes,dislikes:e.dislikes,commentsCount:e.comments_count,userReaction:e.user_reaction,previewImage:e.preview_image,difficulty:e.difficulty}),E=c(()=>{const e=p.value,o=e+f.value;return v.value.slice(e,o).map(D)}),_=a(!1),m=a(""),$=e=>{console.log("Клик по тегу:",e)},F=e=>{console.log("Клик по автору:",e)},N=e=>{console.log("Клик по статье:",e),g.push(`/article/${e}`)},Y=e=>{console.log("Удаление статьи:",e)},U=e=>{console.log("Редактирование статьи:",e),g.push(`/edit-article/${e.id}`)},Z=e=>{console.log("Статья удалена:",e),k()},q=()=>{console.log("Поиск:",m.value)},I=async e=>{const o=e.target;m.value=o.value,b.value&&clearTimeout(b.value),b.value=setTimeout(()=>{q()},500)},b=a(null),T=()=>{g.push("/create-article")},Q=e=>{p.value=e.first,f.value=e.rows,console.log("Page changed:",e),B()},B=()=>{window.scrollTo({top:0,behavior:"smooth"})},M=()=>{const e=window.scrollY,o=window.innerHeight;_.value=e>300;const s=document.querySelector(".footer-container"),i=document.querySelector(".back-to-top-btn");if(s&&i){const A=s.getBoundingClientRect().top,P=100;let y=1;if(A<=o+P){const R=A-o;R<=0?y=0:y=Math.min(1,R/P)}i.style.opacity=y.toString(),i.style.position="fixed",i.style.bottom="30px",i.style.left="30px",i.style.top="auto",i.classList.remove("above-footer")}};return K(async()=>{window.addEventListener("scroll",M),await S(),console.log("Статьи пользователя загружены:",w.value)}),J(()=>{window.removeEventListener("scroll",M)}),(e,o)=>(r(),d("div",rt,[t("div",ct,[o[16]||(o[16]=t("div",{class:"page-title-section"},[t("h1",{class:"page-title"},"Your articles")],-1)),t("div",dt,[t("div",ut,[t("div",vt,[t("button",{class:h(["status-chip",{active:l.value==="all"}]),onClick:o[0]||(o[0]=s=>l.value="all")},"All",2),t("button",{class:h(["status-chip",{active:l.value==="published"}]),onClick:o[1]||(o[1]=s=>l.value="published")},"Published",2),t("button",{class:h(["status-chip",{active:l.value==="draft"}]),onClick:o[2]||(o[2]=s=>l.value="draft")},"Drafts",2)]),t("div",pt,[o[5]||(o[5]=O('<svg class="search-icon" width="32" height="28" viewBox="0 0 42 38" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a4ec0b3c><path d="M39.6119 2H2L17.0448 19.7375V32L24.5672 35.75V19.7375L39.6119 2Z" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a4ec0b3c></path></svg><div class="search-divider" data-v-a4ec0b3c></div><svg class="search-icon-2" width="28" height="28" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a4ec0b3c><path d="M35.8507 35.75L27.6701 27.5937M32.0895 17C32.0895 25.2843 25.3538 32 17.0448 32C8.73577 32 2 25.2843 2 17C2 8.71573 8.73577 2 17.0448 2C25.3538 2 32.0895 8.71573 32.0895 17Z" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a4ec0b3c></path></svg>',3)),t("input",{type:"text",class:"search-input",placeholder:"Find your articles...",value:m.value,onInput:I},null,40,ht)]),t("div",gt,[n(C)?(r(),d("div",wt,[...o[6]||(o[6]=[t("div",{class:"loading-spinner"},null,-1),t("p",{class:"loading-text"},"Loading your articles...",-1)])])):n(L)?(r(),d("div",kt,[t("h3",null,u(e.$t("your-articles.empty.title")),1),t("p",null,u(e.$t("your-articles.empty.subtitle")),1),t("button",{onClick:T,class:"create-article-btn"}," Создать статью ")])):(r(!0),d(X,{key:2},tt(E.value,s=>(r(),st(it,{key:s.id,article:s,onTagClick:$,onAuthorClick:F,onArticleClick:N,onDeleteArticle:Y,onEditArticle:U,onArticleDeleted:Z},null,8,["article"]))),128)),!n(C)&&!n(L)?(r(),d("div",ft,[et(n(nt),{first:p.value,"onUpdate:first":o[3]||(o[3]=s=>p.value=s),rows:f.value,totalRecords:x.value,template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",onPage:Q},null,8,["first","rows","totalRecords"])])):W("",!0)]),t("button",{class:h(["back-to-top-btn",{visible:_.value}]),onClick:B},[...o[7]||(o[7]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 19V5M5 12L12 5L19 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)]),t("div",mt,[t("div",bt,[o[11]||(o[11]=t("div",{class:"card-header"},[t("svg",{class:"card-icon",width:"25",height:"27",viewBox:"0 0 25 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13.7083 1.41666L1.625 15.9167H12.5L11.2917 25.5833L23.375 11.0833H12.5L13.7083 1.41666Z",stroke:"var(--ico-color)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),t("h2",{class:"card-title"},"Your stats")],-1)),t("div",yt,[o[8]||(o[8]=t("p",{class:"info-label"},"Articles:",-1)),t("p",Ct,u(x.value),1)]),t("div",Lt,[o[9]||(o[9]=t("p",{class:"info-label"},"Total likes:",-1)),t("p",xt,u(j.value),1)]),t("div",_t,[o[10]||(o[10]=t("p",{class:"info-label"},"Total comments:",-1)),t("p",Tt,u(H.value),1)]),o[12]||(o[12]=t("div",{class:"info-item"},[t("p",{class:"info-label"},"Views:"),t("p",{class:"info-value"},"unknown")],-1))]),t("div",Bt,[o[15]||(o[15]=t("div",{class:"card-header"},[t("svg",{class:"card-icon",width:"25",height:"27",viewBox:"0 0 25 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13.7083 1.41666L1.625 15.9167H12.5L11.2917 25.5833L23.375 11.0833H12.5L13.7083 1.41666Z",stroke:"var(--ico-color)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),t("h2",{class:"card-title"},"Quick actions")],-1)),t("button",{onClick:T,class:"action-button"},[...o[13]||(o[13]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),V(" Create new article ",-1)])]),t("button",{onClick:o[4]||(o[4]=(...s)=>n(k)&&n(k)(...s)),class:"action-button"},[...o[14]||(o[14]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8M3 3v5h5M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16M21 21v-5h-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),V(" Refresh articles ",-1)])])])])])])]))}}),$t=lt(Mt,[["__scopeId","data-v-a4ec0b3c"]]);export{$t as default};

import{d as j,D as R,i as n,E as e,m as M,l as w,j as t,t as d,B as g,y as b,_ as A,aK as I,o as L,k as D,aL as V,K as z,s,F as C,q as $,G as N}from"./index-Cha8mMNk.js";const H={key:0,class:"unread-bar"},T={class:"notification-icon"},E={key:0,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F={key:1,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K={key:2,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P={key:3,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},S={key:4,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},q={class:"notification-content"},G={class:"notification-header"},O={class:"notification-title"},U={key:0,class:"unread-badge"},W={class:"notification-message"},Y={class:"notification-footer"},J={class:"notification-time"},Q=j({__name:"NotificationItem",props:{notification:{}},emits:["markAsRead","navigate"],setup(a,{emit:p}){const r=a,k=R(),v=p,_=()=>{if(console.log("Notification clicked:",r.notification),console.log("Related article ID:",r.notification.related_article_id),console.log("Related comment ID:",r.notification.related_comment_id),r.notification.related_article_id){const u=`/article/${r.notification.related_article_id}`,o=r.notification.related_comment_id?`${u}#comment-${r.notification.related_comment_id}`:u;console.log("Navigating to:",o),k.push(o),v("navigate",r.notification.id)}else console.log("No related article ID found")},m=()=>{v("markAsRead",r.notification.id)},f=()=>{switch(r.notification.type){case"comment_reply":return"icon-reply";case"article_comment":return"icon-comment";case"article_like_threshold":return"icon-like";case"daily_summary":return"icon-summary";case"weekly_summary":return"icon-summary";default:return"icon-default"}},y=u=>{const o=new Date(u),c=Math.floor((new Date().getTime()-o.getTime())/(1e3*60));return c<1?"только что":c<60?`${c} мин назад`:c<1440?`${Math.floor(c/60)} ч назад`:`${Math.floor(c/1440)} дн назад`};return(u,o)=>(e(),n("div",{class:M(["notification-item",{unread:!a.notification.is_read}]),onClick:_},[a.notification.is_read?w("",!0):(e(),n("div",H)),t("div",T,[t("div",{class:M(["icon-circle",f()])},[a.notification.type==="comment_reply"?(e(),n("svg",E,[...o[0]||(o[0]=[t("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):a.notification.type==="article_comment"?(e(),n("svg",F,[...o[1]||(o[1]=[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16l4-4h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):a.notification.type==="article_like_threshold"?(e(),n("svg",K,[...o[2]||(o[2]=[t("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):a.notification.type==="daily_summary"?(e(),n("svg",P,[...o[3]||(o[3]=[t("path",{d:"M3 3h18v18H3zM21 9H3M21 15H3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(e(),n("svg",S,[...o[4]||(o[4]=[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))],2)]),t("div",q,[t("div",G,[t("h3",O,d(a.notification.title),1),a.notification.is_read?w("",!0):(e(),n("div",U,"NEW"))]),t("p",W,d(a.notification.message),1),t("div",Y,[t("span",J,[o[5]||(o[5]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M12 6v6l4 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),g(" "+d(y(a.notification.created_at)),1)]),a.notification.is_read?w("",!0):(e(),n("button",{key:0,onClick:b(m,["stop"]),class:"mark-read-btn"},[...o[6]||(o[6]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),g(" Отметить прочитанным ",-1)])]))])]),o[7]||(o[7]=t("div",{class:"notification-arrow"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 18l6-6-6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2))}}),B=A(Q,[["__scopeId","data-v-e18c714e"]]),X={class:"notifications-container"},Z={class:"notifications-wrapper"},tt={class:"notifications-header"},ot={class:"header-content"},et={key:0,class:"header-actions"},it={key:0,class:"loading-state"},nt={class:"loading-text"},st={key:1,class:"error-state"},rt={class:"error-text"},at={key:2,class:"notifications-list"},lt={key:0,class:"notifications-section"},dt={class:"section-header"},ct={class:"section-title"},ht={class:"section-badge"},ut={key:1,class:"notifications-section"},wt={class:"section-header"},kt={class:"section-title"},gt={class:"section-count"},ft={key:2,class:"empty-state"},vt={class:"empty-title"},mt={class:"empty-description"},pt=j({__name:"Notifications",setup(a){const{notifications:p,unreadNotifications:r,readNotifications:k,hasUnread:v,loading:_,error:m,fetchNotifications:f,markAsRead:y,markAsReadOnNavigate:u,markAllAsRead:o}=I(),x=async l=>{await y(l)},c=async l=>{await u(l)};return L(()=>{f()}),(l,i)=>(e(),n("div",X,[D(V),t("div",Z,[t("div",tt,[t("div",ot,[i[3]||(i[3]=z('<div class="header-title-block" data-v-94d0ddaa><svg class="header-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-94d0ddaa><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-94d0ddaa></path><path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-94d0ddaa></path></svg><h2 class="main-header" style="text-shadow:none !important;filter:none !important;" data-v-94d0ddaa>Your notifications</h2></div>',1)),s(v)?(e(),n("div",et,[t("button",{onClick:i[0]||(i[0]=(...h)=>s(o)&&s(o)(...h)),class:"mark-all-btn"},[...i[2]||(i[2]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),g(" Отметить все прочитанными ",-1)])])])):w("",!0)])]),s(_)?(e(),n("div",it,[i[4]||(i[4]=t("div",{class:"loading-spinner"},null,-1)),t("p",nt,d(l.$t("notifications_page.loading")),1)])):s(m)?(e(),n("div",st,[i[6]||(i[6]=t("div",{class:"error-icon"},[t("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),t("p",rt,d(s(m)),1),t("button",{onClick:i[1]||(i[1]=(...h)=>s(f)&&s(f)(...h)),class:"retry-btn"},[i[5]||(i[5]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g(" "+d(l.$t("notifications_page.retry")),1)])])):(e(),n("div",at,[s(r).length>0?(e(),n("div",lt,[t("div",dt,[t("h3",ct,[i[7]||(i[7]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M12 6v6l4 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),g(" "+d(l.$t("notifications_page.sections.unread",{count:s(r).length})),1)]),t("span",ht,d(s(r).length),1)]),(e(!0),n(C,null,$(s(r),h=>(e(),N(B,{key:h.id,notification:h,onMarkAsRead:x,onNavigate:c},null,8,["notification"]))),128))])):w("",!0),s(k).length>0?(e(),n("div",ut,[t("div",wt,[t("h3",kt,[i[8]||(i[8]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g(" "+d(l.$t("notifications_page.sections.read",{count:s(k).length})),1)]),t("span",gt,d(s(k).length),1)]),(e(!0),n(C,null,$(s(k),h=>(e(),N(B,{key:h.id,notification:h,onMarkAsRead:x,onNavigate:c},null,8,["notification"]))),128))])):w("",!0),s(p).length===0?(e(),n("div",ft,[i[9]||(i[9]=t("div",{class:"empty-icon"},[t("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),t("h3",vt,d(l.$t("notifications_page.empty.title")),1),t("p",mt,d(l.$t("notifications_page.empty.subtitle")),1)])):w("",!0)]))])]))}}),yt=A(pt,[["__scopeId","data-v-94d0ddaa"]]);export{yt as default};

# Настройка Article Content-Type

## Шаги после создания

После того как Strapi перезапустится и обнаружит новый content-type `Article`, выполните следующие шаги:

### 1. Настройка прав доступа (RBAC)

1. Откройте Strapi Admin: `http://localhost:1337/admin`
2. Перейдите в **Settings → Users & Permissions → Roles**
3. Выберите роль **Authenticated**
4. Найдите **Article** в списке permissions
5. Включите следующие права:
   - ✅ **find** - получение списка опубликованных статей
   - ✅ **findOne** - получение одной статьи
   - ✅ **create** - создание статей
   - ✅ **update** - обновление своих статей
   - ✅ **delete** - удаление своих статей

**Важно**: Контроллер дополнительно проверяет авторство, поэтому пользователи смогут обновлять/удалять только свои статьи.

### 2. Проверка работы API

После настройки прав, API должно работать:

- `GET /api/articles` - список опубликованных статей
- `POST /api/articles` - создание статьи (требует JWT токен)
- `GET /api/articles/me/drafts` - список черновиков (требует JWT токен)

### 3. Тестирование

Используйте фронтенд для создания статьи через страницу `/create-article`. 

Все должно работать автоматически, так как:
- ✅ Content-type создан
- ✅ Контроллеры реализованы
- ✅ Роуты настроены
- ✅ Валидация работает
- ✅ Безопасность обеспечена

## Структура файлов

```
backend/strapi-backend/src/api/article/
├── content-types/
│   └── article/
│       └── schema.json          # Схема content-type
├── controllers/
│   └── article.ts               # Контроллеры (create, update, find, etc.)
├── routes/
│   └── article.ts               # Роуты API
└── README.md                    # Документация API
```

## Безопасность

Все данные автоматически защищены:

- ✅ **SQL Injection**: Защита через параметризованные запросы `entityService`
- ✅ **XSS**: Автоматическая санитаризация HTML через Strapi для `richtext`
- ✅ **Валидация**: Автоматическая валидация по схеме
- ✅ **Авторство**: Проверка авторства при обновлении/удалении
- ✅ **RBAC**: Управление правами через Strapi Admin

## Соответствие требованиям

✅ Использует встроенные механизмы Strapi (entityService, createCoreController)
✅ Полная валидация и санитаризация (автоматически через Strapi)
✅ Защита от XSS, SQL injection (встроенная в Strapi)
✅ RESTful API endpoints
✅ Официальные плагины и middleware (без костылей)

